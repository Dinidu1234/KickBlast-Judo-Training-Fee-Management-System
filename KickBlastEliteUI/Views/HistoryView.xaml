<UserControl x:Class="KickBlastEliteUI.Views.HistoryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
            <ComboBox Width="240" Margin="0,0,8,0" ItemsSource="{Binding Athletes}" DisplayMemberPath="Name" SelectedItem="{Binding SelectedAthlete}"/>
            <TextBox Width="80" Text="{Binding Month, UpdateSourceTrigger=PropertyChanged}"/>
            <TextBox Width="100" Margin="8,0,0,0" Text="{Binding Year, UpdateSourceTrigger=PropertyChanged}"/>
        </StackPanel>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <DataGrid Grid.Column="0" ItemsSource="{Binding Calculations}" SelectedItem="{Binding SelectedCalculation}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Athlete" Binding="{Binding Athlete.Name}"/>
                    <DataGridTextColumn Header="Month/Year" Binding="{Binding Month}"/>
                    <DataGridTextColumn Header="Total" Binding="{Binding TotalCost, StringFormat='LKR {0:N2}'}"/>
                    <DataGridTextColumn Header="Coaching Hours" Binding="{Binding CoachingHours}"/>
                    <DataGridTextColumn Header="Competitions" Binding="{Binding CompetitionsCount}"/>
                    <DataGridTextColumn Header="Created" Binding="{Binding CreatedAt, StringFormat='{}{0:dd MMM yyyy}'}"/>
                </DataGrid.Columns>
            </DataGrid>
            <Border Grid.Column="1" Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="Details" FontSize="16" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding SelectedCalculation.Athlete.Name, StringFormat='Athlete: {0}'}"/>
                    <TextBlock Text="{Binding SelectedCalculation.TrainingCost, StringFormat='Training: LKR {0:N2}'}"/>
                    <TextBlock Text="{Binding SelectedCalculation.CoachingCost, StringFormat='Coaching: LKR {0:N2}'}"/>
                    <TextBlock Text="{Binding SelectedCalculation.CompetitionCost, StringFormat='Competition: LKR {0:N2}'}"/>
                    <TextBlock Text="{Binding SelectedCalculation.TotalCost, StringFormat='Total: LKR {0:N2}'}" FontWeight="Bold" FontSize="20"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>
